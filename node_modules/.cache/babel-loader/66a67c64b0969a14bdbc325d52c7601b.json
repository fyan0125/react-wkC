{"ast":null,"code":"import { SET_PAGE_TITLE, SET_PAGE_CONTENT, SET_NAVBAR_ACTIVEITEM, ADD_CART_ITEM, REMOVE_CART_ITEM, EMPTY_CART, SAVE_SHIPPING_ADDRESS, SAVE_PAYMENT_METHOD, SET_PRODUCT_DETAIL, BEGIN_PRODUCTS_FEED, SUCCESS_PRODUCTS_FEED, FAIL_PRODUCTS_FEED, BEGIN_PRODUCTS_REQUEST, SUCCESS_PRODUCTS_REQUEST, FAIL_PRODUCTS_REQUEST, BEGIN_LOGIN_REQUEST, SUCCESS_LOGIN_REQUEST, FAIL_LOGIN_REQUEST, LOGOUT_REQUEST, REMEMBER_LOGIN, BEGIN_REGISTER_REQUEST, SUCCESS_REGISTER_REQUEST, FAIL_REGISTER_REQUEST, BEGIN_UPDATE_USERINFO, SUCCESS_UPDATE_USERINFO, FAIL_UPDATE_USERINFO, BEGIN_ORDER_CREATE, SUCCESS_ORDER_CREATE, FAIL_ORDER_CREATE, RESET_ORDER, BEGIN_ORDER_DETAIL, SUCCESS_ORDER_DETAIL, FAIL_ORDER_DETAIL } from \"../utils/constants\";\nimport { getProducts, getProductById, feedProducts, signInWithEmailPassword, registerWithEmailPassword, signOut, updateUserInfoApi, createOrderApi, getOrderById, checkLoginApi } from \"../api\";\nexport const addCartItem = (dispatch, product, qty) => {\n  const item = {\n    id: product.id,\n    category: product.category,\n    name: product.name,\n    image: product.image,\n    price: product.price,\n    countInStock: product.countInStock,\n    qty\n  };\n  dispatch({\n    type: ADD_CART_ITEM,\n    payload: item\n  });\n};\nexport const removeCartItem = (dispatch, productId) => {\n  dispatch({\n    type: REMOVE_CART_ITEM,\n    payload: productId\n  });\n};\nexport const saveShippingAddress = (dispatch, shippingAddress) => {\n  dispatch({\n    type: SAVE_SHIPPING_ADDRESS,\n    payload: shippingAddress\n  });\n  localStorage.setItem('shippingAddress', JSON.stringify(shippingAddress));\n};\nexport const savePaymentMethod = (dispatch, paymentMethod) => {\n  dispatch({\n    type: SAVE_PAYMENT_METHOD,\n    payload: paymentMethod.paymentMethod\n  });\n};\nexport const feedJSONToFirebase = async dispatch => {\n  dispatch({\n    type: BEGIN_PRODUCTS_FEED\n  });\n\n  try {\n    await feedProducts();\n    dispatch({\n      type: SUCCESS_PRODUCTS_FEED\n    });\n  } catch (error) {\n    console.log(error);\n    dispatch({\n      type: FAIL_PRODUCTS_FEED,\n      payload: error\n    });\n  }\n};\nexport const setProductDetail = async (dispatch, productId, qty) => {\n  dispatch({\n    type: BEGIN_PRODUCTS_REQUEST\n  });\n\n  try {\n    const product = await getProductById(productId);\n    if (qty === 0) dispatch({\n      type: SET_PRODUCT_DETAIL,\n      payload: {\n        product\n      }\n    });else dispatch({\n      type: SET_PRODUCT_DETAIL,\n      payload: {\n        product,\n        qty\n      }\n    });\n    dispatch({\n      type: SUCCESS_PRODUCTS_REQUEST\n    });\n  } catch (error) {\n    console.log(error);\n    dispatch({\n      type: FAIL_PRODUCTS_REQUEST,\n      payload: error\n    });\n  }\n};\nexport const setPage = async (dispatch, url, title) => {\n  let products = [];\n  dispatch({\n    type: BEGIN_PRODUCTS_REQUEST\n  });\n  dispatch({\n    type: SET_PAGE_TITLE,\n    payload: title\n  });\n\n  try {\n    products = await getProducts(url);\n    dispatch({\n      type: SET_PAGE_CONTENT,\n      payload: {\n        title,\n        products\n      }\n    });\n    dispatch({\n      type: SET_NAVBAR_ACTIVEITEM,\n      payload: url\n    });\n    dispatch({\n      type: SUCCESS_PRODUCTS_REQUEST\n    });\n  } catch (error) {\n    console.log(error);\n    dispatch({\n      type: FAIL_PRODUCTS_REQUEST,\n      payload: error\n    });\n  }\n};\nexport const loginToFirebase = async (dispatch, userInfo) => {\n  dispatch({\n    type: BEGIN_LOGIN_REQUEST\n  });\n\n  try {\n    const user = await signInWithEmailPassword(userInfo.email, userInfo.password);\n    dispatch({\n      type: SUCCESS_LOGIN_REQUEST,\n      payload: user.user.providerData[0]\n    });\n    return user;\n  } catch (e) {\n    dispatch({\n      type: FAIL_LOGIN_REQUEST,\n      payload: e.message\n    });\n    console.log(e);\n    return null;\n  }\n};\nexport const rememberLoginUser = (dispatch, remember) => {\n  dispatch({\n    type: REMEMBER_LOGIN,\n    payload: remember\n  });\n};\nexport const registerToFirebase = async (dispatch, userInfo) => {\n  dispatch({\n    type: BEGIN_REGISTER_REQUEST\n  });\n\n  try {\n    const user = await registerWithEmailPassword(userInfo.email, userInfo.password, userInfo.name);\n    console.log(user);\n    dispatch({\n      type: SUCCESS_REGISTER_REQUEST,\n      payload: user.providerData[0]\n    });\n    return user;\n  } catch (e) {\n    dispatch({\n      type: FAIL_REGISTER_REQUEST,\n      payload: e.message\n    });\n    console.log(e);\n    return null;\n  }\n};\nexport const updateUserInfo = async (dispatch, userInfo) => {\n  dispatch({\n    type: BEGIN_UPDATE_USERINFO\n  });\n\n  try {\n    const user = await updateUserInfoApi(userInfo.email, userInfo.password, userInfo.name);\n    dispatch({\n      type: SUCCESS_UPDATE_USERINFO,\n      payload: user.providerData[0]\n    });\n  } catch (e) {\n    dispatch({\n      type: FAIL_UPDATE_USERINFO,\n      payload: e.message\n    });\n    console.log(e);\n  }\n};\nexport const logoutFromFirebase = async dispatch => {\n  signOut();\n  dispatch({\n    type: LOGOUT_REQUEST\n  });\n};\nexport const createOrder = async (dispatch, cart) => {\n  dispatch({\n    type: BEGIN_ORDER_CREATE\n  });\n\n  try {\n    const item = {\n      orderItems: cart.cartItems,\n      shippingAddress: cart.shippingAddress,\n      paymentMethod: cart.paymentMethod,\n      itemsPrice: cart.itemsPrice,\n      shippingPrice: cart.shippingPrice,\n      taxPrice: cart.taxPrice,\n      totalPrice: cart.totalPrice\n    };\n    const orderInfo = await createOrderApi(item);\n    dispatch({\n      type: SUCCESS_ORDER_CREATE,\n      payload: orderInfo\n    });\n    dispatch({\n      type: EMPTY_CART\n    });\n    localStorage.setItem('orderInfo', JSON.stringify(orderInfo));\n    localStorage.removeItem(\"cartItems\");\n    return orderInfo;\n  } catch (error) {\n    console.log(error);\n    dispatch({\n      type: FAIL_ORDER_CREATE,\n      payload: error\n    });\n    return null;\n  }\n};\nexport const requestOrderDetail = async (dispatch, orderId) => {\n  dispatch({\n    type: BEGIN_ORDER_DETAIL\n  });\n\n  try {\n    const order = await getOrderById(orderId);\n    dispatch({\n      type: SUCCESS_ORDER_DETAIL,\n      payload: order\n    });\n  } catch (error) {\n    dispatch({\n      type: FAIL_ORDER_DETAIL,\n      payload: error\n    });\n  }\n};\nexport const resetOrder = dispatch => {\n  dispatch({\n    type: RESET_ORDER\n  });\n};\nexport const checkLogin = dispatch => {\n  const isLogin = checkLoginApi();\n\n  if (!isLogin) {\n    localStorage.removeItem('orderInfo');\n    dispatch({\n      type: LOGOUT_REQUEST\n    });\n  }\n\n  return isLogin;\n};","map":{"version":3,"sources":["/Users/fangyan/Desktop/L9_GooglePay/src/actions/index.js"],"names":["SET_PAGE_TITLE","SET_PAGE_CONTENT","SET_NAVBAR_ACTIVEITEM","ADD_CART_ITEM","REMOVE_CART_ITEM","EMPTY_CART","SAVE_SHIPPING_ADDRESS","SAVE_PAYMENT_METHOD","SET_PRODUCT_DETAIL","BEGIN_PRODUCTS_FEED","SUCCESS_PRODUCTS_FEED","FAIL_PRODUCTS_FEED","BEGIN_PRODUCTS_REQUEST","SUCCESS_PRODUCTS_REQUEST","FAIL_PRODUCTS_REQUEST","BEGIN_LOGIN_REQUEST","SUCCESS_LOGIN_REQUEST","FAIL_LOGIN_REQUEST","LOGOUT_REQUEST","REMEMBER_LOGIN","BEGIN_REGISTER_REQUEST","SUCCESS_REGISTER_REQUEST","FAIL_REGISTER_REQUEST","BEGIN_UPDATE_USERINFO","SUCCESS_UPDATE_USERINFO","FAIL_UPDATE_USERINFO","BEGIN_ORDER_CREATE","SUCCESS_ORDER_CREATE","FAIL_ORDER_CREATE","RESET_ORDER","BEGIN_ORDER_DETAIL","SUCCESS_ORDER_DETAIL","FAIL_ORDER_DETAIL","getProducts","getProductById","feedProducts","signInWithEmailPassword","registerWithEmailPassword","signOut","updateUserInfoApi","createOrderApi","getOrderById","checkLoginApi","addCartItem","dispatch","product","qty","item","id","category","name","image","price","countInStock","type","payload","removeCartItem","productId","saveShippingAddress","shippingAddress","localStorage","setItem","JSON","stringify","savePaymentMethod","paymentMethod","feedJSONToFirebase","error","console","log","setProductDetail","setPage","url","title","products","loginToFirebase","userInfo","user","email","password","providerData","e","message","rememberLoginUser","remember","registerToFirebase","updateUserInfo","logoutFromFirebase","createOrder","cart","orderItems","cartItems","itemsPrice","shippingPrice","taxPrice","totalPrice","orderInfo","removeItem","requestOrderDetail","orderId","order","resetOrder","checkLogin","isLogin"],"mappings":"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","sourcesContent":["import {\n  SET_PAGE_TITLE,\n  SET_PAGE_CONTENT,\n  SET_NAVBAR_ACTIVEITEM,\n  ADD_CART_ITEM,\n  REMOVE_CART_ITEM,\n  EMPTY_CART,\n  SAVE_SHIPPING_ADDRESS,\n  SAVE_PAYMENT_METHOD,\n  SET_PRODUCT_DETAIL,\n  BEGIN_PRODUCTS_FEED,\n  SUCCESS_PRODUCTS_FEED,\n  FAIL_PRODUCTS_FEED,\n  BEGIN_PRODUCTS_REQUEST,\n  SUCCESS_PRODUCTS_REQUEST,\n  FAIL_PRODUCTS_REQUEST,\n  BEGIN_LOGIN_REQUEST,\n  SUCCESS_LOGIN_REQUEST,\n  FAIL_LOGIN_REQUEST,\n  LOGOUT_REQUEST,\n  REMEMBER_LOGIN,\n  BEGIN_REGISTER_REQUEST,\n  SUCCESS_REGISTER_REQUEST,\n  FAIL_REGISTER_REQUEST,\n  BEGIN_UPDATE_USERINFO,\n  SUCCESS_UPDATE_USERINFO,\n  FAIL_UPDATE_USERINFO,\n  BEGIN_ORDER_CREATE,\n  SUCCESS_ORDER_CREATE,\n  FAIL_ORDER_CREATE,\n  RESET_ORDER,\n  BEGIN_ORDER_DETAIL,\n  SUCCESS_ORDER_DETAIL,\n  FAIL_ORDER_DETAIL,\n} from \"../utils/constants\";\n\nimport {\n  getProducts,\n  getProductById,\n  feedProducts,\n  signInWithEmailPassword,\n  registerWithEmailPassword,\n  signOut,\n  updateUserInfoApi,\n  createOrderApi,\n  getOrderById,\n  checkLoginApi,\n} from \"../api\";\n\nexport const addCartItem = (dispatch, product, qty) => {\n  const item = {\n    id: product.id,\n    category: product.category,\n    name: product.name,\n    image: product.image,\n    price: product.price,\n    countInStock: product.countInStock,\n    qty,\n  };\n  dispatch({\n    type: ADD_CART_ITEM,\n    payload: item,\n  });\n};\n\nexport const removeCartItem = (dispatch, productId) => {\n  dispatch({\n    type: REMOVE_CART_ITEM,\n    payload: productId,\n  });\n};\n\nexport const saveShippingAddress = (dispatch, shippingAddress) => {\n  dispatch({\n    type: SAVE_SHIPPING_ADDRESS,\n    payload: shippingAddress,\n  });\n  localStorage.setItem('shippingAddress', JSON.stringify(shippingAddress));\n}\n\nexport const savePaymentMethod = (dispatch, paymentMethod) => {\n  dispatch({\n    type: SAVE_PAYMENT_METHOD,\n    payload: paymentMethod.paymentMethod,\n  });\n}\n\nexport const feedJSONToFirebase = async (dispatch) => {\n  dispatch({ type: BEGIN_PRODUCTS_FEED });\n  try {\n    await feedProducts();\n    dispatch({ type: SUCCESS_PRODUCTS_FEED });\n  } catch (error) {\n    console.log(error);\n    dispatch({ type: FAIL_PRODUCTS_FEED, payload: error });\n  }\n}\n\nexport const setProductDetail = async (dispatch, productId, qty) => {\n  dispatch({ type: BEGIN_PRODUCTS_REQUEST });\n  try {\n    const product = await getProductById(productId);\n    if (qty === 0)\n      dispatch({\n        type: SET_PRODUCT_DETAIL,\n        payload: {\n          product,\n        }\n      })\n    else\n      dispatch({\n        type: SET_PRODUCT_DETAIL,\n        payload: {\n          product,\n          qty,\n        }\n      })\n    dispatch({ type: SUCCESS_PRODUCTS_REQUEST });\n  } catch (error) {\n    console.log(error);\n    dispatch({ type: FAIL_PRODUCTS_REQUEST, payload: error });\n  }\n}\n\nexport const setPage = async (dispatch, url, title) => {\n  let products = [];\n  dispatch({ type: BEGIN_PRODUCTS_REQUEST });\n  dispatch({\n    type: SET_PAGE_TITLE,\n    payload: title,\n  });\n  try {\n    products = await getProducts(url);\n    dispatch({\n      type: SET_PAGE_CONTENT,\n      payload: { title, products },\n    });\n    dispatch({\n      type: SET_NAVBAR_ACTIVEITEM,\n      payload: url,\n    });\n    dispatch({ type: SUCCESS_PRODUCTS_REQUEST });\n  } catch (error) {\n    console.log(error);\n    dispatch({ type: FAIL_PRODUCTS_REQUEST, payload: error });\n  }\n}\n\nexport const loginToFirebase = async (dispatch, userInfo) => {\n  dispatch({ type: BEGIN_LOGIN_REQUEST });\n  try {\n    const user = await signInWithEmailPassword(userInfo.email, userInfo.password);\n    dispatch({\n      type: SUCCESS_LOGIN_REQUEST,\n      payload: user.user.providerData[0],\n    })\n    return user;\n  } catch (e) {\n    dispatch({\n      type: FAIL_LOGIN_REQUEST,\n      payload: e.message\n    })\n    console.log(e)\n    return null;\n  }\n}\n\nexport const rememberLoginUser = (dispatch, remember) => {\n  dispatch({\n    type: REMEMBER_LOGIN,\n    payload: remember,\n  })\n}\n\nexport const registerToFirebase = async (dispatch, userInfo) => {\n  dispatch({ type: BEGIN_REGISTER_REQUEST });\n  try {\n    const user = await registerWithEmailPassword(userInfo.email, userInfo.password, userInfo.name);\n    console.log(user)\n    dispatch({\n      type: SUCCESS_REGISTER_REQUEST,\n      payload: user.providerData[0],\n    })\n    return user;\n  } catch (e) {\n    dispatch({\n      type: FAIL_REGISTER_REQUEST,\n      payload: e.message\n    })\n    console.log(e)\n    return null;\n  }\n}\n\nexport const updateUserInfo = async (dispatch, userInfo) => {\n  dispatch({ type: BEGIN_UPDATE_USERINFO });\n  try {\n    const user = await updateUserInfoApi(\n      userInfo.email,\n      userInfo.password,\n      userInfo.name\n    );\n    dispatch({\n      type: SUCCESS_UPDATE_USERINFO,\n      payload: user.providerData[0],\n    });\n  } catch (e) {\n    dispatch({\n      type: FAIL_UPDATE_USERINFO,\n      payload: e.message,\n    });\n    console.log(e);\n  }\n};\n\nexport const logoutFromFirebase = async (dispatch) => {\n  signOut();\n  dispatch({ type: LOGOUT_REQUEST });\n}\n\nexport const createOrder = async (dispatch, cart) => {\n  dispatch({ type: BEGIN_ORDER_CREATE });\n  try {\n    const item = {\n      orderItems: cart.cartItems,\n      shippingAddress: cart.shippingAddress,\n      paymentMethod: cart.paymentMethod,\n      itemsPrice: cart.itemsPrice,\n      shippingPrice: cart.shippingPrice,\n      taxPrice: cart.taxPrice,\n      totalPrice: cart.totalPrice,\n    };    \n    const orderInfo = await createOrderApi(item);\n    dispatch({ \n      type: SUCCESS_ORDER_CREATE, \n      payload: orderInfo \n    });\n    dispatch({ type: EMPTY_CART,})\n    localStorage.setItem('orderInfo', JSON.stringify(orderInfo));\n    localStorage.removeItem(\"cartItems\");\n    return orderInfo;\n  } catch (error) {\n    console.log(error);\n    dispatch({ type: FAIL_ORDER_CREATE, payload: error });\n    return null;\n  }  \n};\n\nexport const requestOrderDetail = async (dispatch, orderId) => {\n  dispatch({ type: BEGIN_ORDER_DETAIL });\n  try {\n    const order = await getOrderById(orderId);\n    dispatch({ \n      type: SUCCESS_ORDER_DETAIL,\n      payload: order\n    });\n  } catch (error) {\n    dispatch({ \n      type: FAIL_ORDER_DETAIL, \n      payload: error \n    });\n  }\n}\n\nexport const resetOrder = (dispatch) => {\n  dispatch({ type: RESET_ORDER });\n}\n\nexport const checkLogin = (dispatch) => {\n  const isLogin = checkLoginApi();\n  if(!isLogin) {\n    localStorage.removeItem('orderInfo')\n    dispatch({ type: LOGOUT_REQUEST });    \n  }\n  return isLogin;\n}\n"]},"metadata":{},"sourceType":"module"}